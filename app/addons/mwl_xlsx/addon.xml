<?xml version="1.0" encoding="UTF-8"?>
<addon scheme="3.0">
    <id>mwl_xlsx</id>
    <version>0.1.0</version>
    <priority>500</priority>
    <position>0</position>

    <!-- Устанавливать во всех редакциях с витриной -->
    <auto_install>MULTIVENDOR,ULTIMATE</auto_install>
    <default_language>en</default_language>

    <name>Media Lists</name>
    <description>Adds multiple media lists per user without core changes (hooks, own tables, UI on product buttons).</description>

    <uninstall>fn_mwl_xlsx_uninstall</uninstall>

    <!-- Установочные/деинсталляционные SQL -->
    <queries>
        <!-- install -->
        <item for="install"><![CDATA[
        CREATE TABLE IF NOT EXISTS `?:mwl_xlsx_lists` (
        `list_id` INT AUTO_INCREMENT PRIMARY KEY,
        `user_id` INT UNSIGNED NOT NULL DEFAULT 0,
        `session_id` VARCHAR(64) NOT NULL DEFAULT '',
        `name` VARCHAR(255) NOT NULL,
        `is_private` TINYINT(1) NOT NULL DEFAULT 0,
        `created_at` DATETIME NOT NULL,
        `updated_at` DATETIME NOT NULL
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        ]]></item>

        <item for="install"><![CDATA[
        CREATE TABLE IF NOT EXISTS `?:mwl_xlsx_list_products` (
        `list_id` INT NOT NULL,
        `product_id` INT NOT NULL,
        `product_options` TEXT,
        `amount` INT NOT NULL DEFAULT 1,
        `timestamp` INT NOT NULL,
        PRIMARY KEY (`list_id`, `product_id`, `timestamp`)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        ]]></item>

        <item for="install"><![CDATA[
        CREATE TABLE IF NOT EXISTS `?:mwl_xlsx_templates` (
        `template_id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
        `company_id` INT UNSIGNED NOT NULL DEFAULT 0,
        `name` VARCHAR(255) NOT NULL,
        `path` VARCHAR(255) NOT NULL,
        `size` INT UNSIGNED NOT NULL DEFAULT 0,
        `created_at` INT UNSIGNED NOT NULL,
        `updated_at` INT UNSIGNED NOT NULL,
        PRIMARY KEY (`template_id`),
        KEY `company_id` (`company_id`)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8
        ]]></item>

        <!-- uninstall -->
        <item for="uninstall"><![CDATA[
        DROP TABLE IF EXISTS `?:mwl_xlsx_list_products`;
        ]]></item>

        <item for="uninstall"><![CDATA[
        DROP TABLE IF EXISTS `?:mwl_xlsx_lists`;
        ]]></item>
    </queries>


    <!-- Языковые переменные -->
    <languages>
        <item>
            <name>en</name>
            <values>
                <value id="mwl_xlsx.name">Media Lists</value>
                <value id="mwl_xlsx.description">Create and manage multiple media lists.</value>
                <value id="mwl_xlsx.wishlists">Media lists</value>
                <value id="mwl_xlsx.my_lists">My media lists</value>
                <value id="mwl_xlsx.new_list">New list…</value>
                <value id="mwl_xlsx.enter_list_name">Enter list name</value>
                <value id="mwl_xlsx.added"><![CDATA[Added to <a href="[list_url]">[list_name]</a>]]></value>
                <value id="mwl_xlsx.added_plain">Added to media list</value>
                <value id="mwl_xlsx.rename">Rename</value>
                <value id="mwl_xlsx.remove">Remove</value>
                <value id="mwl_xlsx.confirm_remove">Remove this list?</value>
                <value id="mwl_xlsx.add_all_to_wishlist">Add all to media list</value>
                <value id="mwl_xlsx.add_to_wishlist">Add to media list</value>
                <value id="mwl_xlsx.remove_from_list">Remove from list</value>
                <value id="mwl_xlsx.removed">Removed</value>
            </values>
        </item>
        <item>
            <name>ru</name>
            <values>
                <value id="mwl_xlsx.name">Несколько подборок</value>
                <value id="mwl_xlsx.description">Создание и управление несколькими подборками.</value>
                <value id="mwl_xlsx.wishlists">Подборки</value>
                <value id="mwl_xlsx.my_lists">Мои подборки</value>
                <value id="mwl_xlsx.new_list">Новая подборка…</value>
                <value id="mwl_xlsx.enter_list_name">Введите название подборки</value>
                <value id="mwl_xlsx.added"><![CDATA[Добавлено в <a href="[list_url]">[list_name]</a>]]></value>
                <value id="mwl_xlsx.added_plain">Добавлено в подборку</value>
                <value id="mwl_xlsx.rename">Переименовать</value>
                <value id="mwl_xlsx.remove">Удалить</value>
                <value id="mwl_xlsx.confirm_remove">Удалить эту подборку?</value>
                <value id="mwl_xlsx.add_all_to_wishlist">Добавить все в подборку</value>
                <value id="mwl_xlsx.add_to_wishlist">Добавить в подборку</value>
                <value id="mwl_xlsx.remove_from_list">Удалить из подборки</value>
                <value id="mwl_xlsx.removed">Удалено</value>
            </values>
        </item>
    </languages>

    <!-- Настройки можно добавить позже
    <settings>
        <sections>
            <section id="general" name="General">
                <items>
                    <item id="allow_sharing" type="checkbox" name="Allow sharing by link" value="Y"/>
                    <item id="default_list_name" type="input" name="Default list name" value="Favorites"/>
                </items>
            </section>
        </sections>
    </settings>
    -->
</addon>
